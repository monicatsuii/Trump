const dataCleanUp = (data) => {
    const cleanUp = {
      2016: {
        0: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        1: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        2: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        3: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        4: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        5: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        6: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        7: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        8: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        9: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        10: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        11: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
      },
      2017: {
        0: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        1: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        2: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        3: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        4: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        5: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        6: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        7: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        8: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        9: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        10: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        11: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
      },
      2018: {
        0: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        1: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        2: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        3: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        4: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        5: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        6: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        7: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        8: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        9: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        10: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        11: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
      },
      2019: {
        0: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        1: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        2: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        3: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        4: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        5: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        6: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        7: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        8: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        9: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        10: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        11: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
      },
      2020: {
        0: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        1: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        2: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        3: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        4: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        5: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        6: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        7: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        8: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        9: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        10: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        11: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
      },
      2021: {
        0: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        1: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        2: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        3: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        4: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        5: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        6: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        7: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        8: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        9: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        10: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
        11: {
          0: { pos: [], neg: [] },
          1: { pos: [], neg: [] },
          2: { pos: [], neg: [] },
          3: { pos: [], neg: [] },
        },
      },
    };
  
    for (let entry of data) {
      let date = new Date(entry.datetime);
      let year = parseInt(date.getFullYear());
      let month = parseInt(date.getMonth());
      let day =
        `${date.getDate()}`.length > 1
          ? parseInt(`${date.getDate()}`[0]) === "3"
            ? 2
            : parseInt(`${date.getDate()}`[0])
          : 0;
  
      day = parseInt(day);
      let genSent = parseFloat(entry.sentiment) > 0 ? "pos" : "neg";
      if (cleanUp[year][month][day][genSent].length == 0) {
        // sentiment, id, size
        cleanUp[year][month][day][genSent] = [
          parseFloat(entry.sentiment),
          [year, month, day],
          1,
          date,
          1,
        ];
      } else {
        cleanUp[year][month][day][genSent][0] += parseFloat(entry.sentiment);
        cleanUp[year][month][day][genSent][2] += 0.3;
        cleanUp[year][month][day][genSent][4] += 1;
      }
    }
    const newdata = [];
  
    for (const [key, val] of Object.entries(cleanUp)) {
      for (const [ke, va] of Object.entries(val)) {
        for (const [i, j] of Object.entries(va)) {
          for (const [k, v] of Object.entries(j)) {
            if (v.length == 0) continue;
            let fromDay = v[1][2] == "0" ? "1" : v[1][2] == "1" ? "10" : "20";
            let toDay = parseInt(v[1][2]) < 2 ? v[1][2] + "9" : "31";
            const label = `${fromDay}/${v[1][1] + 1}/${v[1][0]} - ${toDay}/${
              v[1][1] + 1
            }/${v[1][0]}`;
            let filtered = {
              sentiment: v[0] / v[4],
              id: label,
              size: `${v[2] * 1000000}`,
              datetime: v[3],
            };
            newdata.push(filtered);
          }
        }
      }
    }
    return newdata;
  };
  